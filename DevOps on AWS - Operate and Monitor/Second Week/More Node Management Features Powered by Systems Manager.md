![[index (11).mp4]]
# __
In this video, I am going to tell you about features mostly regarding to what Systems Manager can do for your EC2 based workloads. I am going to talk about Session Manager, Patch Manager, and State Manager.
# __
If you are someone who wants to improve your security and audit standards, reduce operational overhead by centralizing access control on instances, and reduce administrative instance access, Session Manager is for you. Instead of using SSH to connect to your instances, you can assume IAM roles and initiate shell sessions to your instances.
# __
It gives you access in your browser. It logs the command in a CloudWatch Logs log stream, and audits session activity into CloudTrail.
# __
The access is given with just one click from the browser or the AWS CLI, all without having to provide SSH keys, like I will show you.
# __
In order to have it working, you have to do three simple things. First, create an IAM role that allows EC2. instances to call other AWS services, and have permission to call AWS Systems Manager. Luckily, we have a prebuilt policy called Amazon SSM Managed Instance Core, which already does that. You don't need to create one role per instance, since roles can be reused by many AWS instances. So give that role a generic name, like EC2 SSM role. Second, have the Systems Manager agents running in the OS of your choice. If you are running Amazon Linux, you can skip that part because it is already there. If you're running another OS, you can download and install the agents by looking to the AWS documentation on where to get the installation files. Most of the features for Systems Manager requires that agents to be up and running.
# __
Third, select your instance and click connect. The AWS Management Console will offer you some options. Choose Session Manager and connect. Done. You will have a shell session in your browser.
# __
And of course, this can also be done from your command line, if you don't want you to touch the AWS Management Console. Because you have mechanisms to integrate IAM with single sign-on and federation using common identity providers, such as Microsoft Active Directory, this has great value because you can avoid using yet another one authentication method to your servers, which in this case would be SSH. In fact, you can even close the SSH port in your security group, since Session Manager doesn't use that protocol under the hood. It is an HTTPS socket from the instance to the Session Manager service.
# __
Now, remember the documents feature from the previous video, which are like blueprints in terms of actions? How about creating a blueprint that adds the role to a given EC2 instance and another one that removes it? So you don't leave the role enabled all the time. Can you see how the pieces start to build together for DevOps solutions? Little by little, we learn how to assemble the puzzle. Now, imagine you have a fleet of tens of instances and you need to urgently apply a security patch on the OS for every single one. Although Session Manager makes it easier for you to connect to an instance, it is not a feature that would scale in our scenario. Sometimes, you can just launch new instances with the new patch, but sometimes the instances contain data, like a database, or part of a Hadoop cluster. So they are in use and can't be turned off. If that's the case, Patch Manager to the rescue. As the name suggests, Patch Manager automates the processes of patching managed instances with both security-related and other types of updates. You can use Patch Manager to apply patches for both operating systems and even applications. Patch Manager allows you to perform the patch all at the same time, or in a rolled-out fashion. There are many best practices around, and I suggest taking a look at the AWS documentation, AWS blogs, and course readings for more information about them.
# __
The most interesting best practice is to integrate Patch Manager with AWS Security Hub to receive alerts when instances in your fleet go out of compliance, and monitor the patching status of your fleets from a security point of view.
# __
And last, but not least, State Manager, a feature to automate the processes of keeping your EC2 instances and hybrid infrastructure in a state that you define. You can run on demand, or schedule actions driven by SSM documents in your managed instances. If you're using open-source frameworks for OS management, like Chef or Puppet, for example, you can use a State Manager to certify that these agents are up, running, and updated. With State Manager, you can, for example, bootstrap instances with specific software at startup, configure network settings, join instances to an Active Directory domain, run scripts or Linux, macOS, and Windows instances throughout their life cycle. And many more features. Let us know in the forums or discussion groups if you're using any of these features in your EC2 fleet. We are curious to know how you're using it as part of the operational part of your DevOps workflow.